

<!--
 * @version:
 * @Author:  StevenJokes https://github.com/StevenJokes
 * @Date: 2020-07-29 20:11:46
 * @LastEditors:  StevenJokes https://github.com/StevenJokes
 * @LastEditTime: 2020-07-29 20:16:44
 * @Description:translate by machine
 * @TODO::
 * @Reference:http://preview.d2l.ai/d2l-en/master/chapter_recurrent-neural-networks/text-preprocessing.html
-->

# 文本预处理

文本是序列数据的一个重要例子。一篇文章可以简单地看作是一系列的单词，或一系列的字符。鉴于文本数据是一个主要的数据格式除了图像我们在这本书中使用，这一节将致力于解释文本数据的常见预处理步骤。这种预处理通常包括四个步骤:

- 将文本作为字符串加载到内存中。
- 将字符串拆分为标记，其中标记可以是单词或字符。
- 为这些令牌构建一个词汇表，将它们映射到数字索引中。
- 将数据中的所有令牌映射到索引中，以便于向模型提供数据。

TODO:CODE

首先，我们从 h · g · 威尔斯的《时间机器》中载入文本。这是一个相当小的语料库，只有30,000到30,000个单词，但是为了我们想要说明的目的，这样就很好了。更现实的文档集合包含数十亿个单词。下面的函数将数据集读入一个句子列表，每个句子是一个字符串。这里我们忽略了标点和大写。

TODO:CODE

## 令牌化

对于每个句子，我们将其拆分为标记列表。 令牌是模型将训练和预测的数据点。 以下函数支持将句子拆分为单词或字符，并返回拆分字符串的列表。

TODO:CODE

## 词汇量

令牌的字符串类型不便于使用带有数字输入的模型使用。 现在让我们建立一个字典，通常也称为词汇表，以将字符串标记映射到从0开始的数字索引。为此，我们首先计算所有文档中的唯一标记（称为语料库），然后为每个唯一标记分配一个数字索引 令牌根据其频率。 通常会删除很少出现的令牌，以降低复杂性。 令牌不胼存在或已被移除被映射到令牌的特殊未知（“<unk>”）。 我们可以选择添加保留标记的列表，例如“ <pad>”（用于填充的标记），“ <bos>”（用于表示句子的开头）和“ <eos>”（用于句子的结尾）。

TODO:CODE

我们以时间机器数据集为语料库构建词汇表，然后打印几个标记及其索引之间的映射。

TODO:CODE

在此之后，我们可以将每个句子转换成一个数字索引列表。为了详细说明，我们打印两个带有相应索引的句子。

TODO:CODE

## 把所有放一起

使用上述函数，我们将所有内容打包到load_corpus_time_machine函数中，该函数返回语料库、标记索引列表和vocab(时间机器语料库的词汇表)。我们在这里所做的修改是，语料库是单个列表，而不是令牌列表的列表，因为我们没有在下列模型中保存序列信息。此外，在后面的章节中，我们使用字符标记来简化训练。

TODO:CODE

## 小结

我们通过将文档标记为单词或字符，然后映射到索引来对文档进行预处理。

## 练习

标记化是预处理的关键步骤。它因语言的不同而不同。试着找出另外三种常用的句子标记方法。
