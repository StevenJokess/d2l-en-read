

<!--
 * @version:
 * @Author:  StevenJokess https://github.com/StevenJokess
 * @Date: 2020-12-20 18:40:01
 * @LastEditors:  StevenJokess https://github.com/StevenJokess
 * @LastEditTime: 2020-12-20 18:53:43
 * @Description:
 * @TODO::
 * @Reference:e
-->

鸿蒙内核源码分析(内存概念篇)  | 鸿蒙内核源码分析(内存管理篇) | 鸿蒙内核源码分析(内存汇编篇)

鸿蒙内核源码分析(内存分配篇)  | 鸿蒙内核源码分析(内存映射篇) | 鸿蒙内核源码分析(内存空间篇) 

鸿蒙内核源码分析(内存置换篇)  | 鸿蒙内核源码分析(内存共享篇) | 鸿蒙内核源码分析(内存故事篇) 

---

# 鸿蒙内核源码分析(内存概念篇) 
# 没有内存管理会怎样?

单片机时代就是这种情况. 裸机编程,指针可以随便乱飞,数据可以随意覆盖,没有划定边界,没有明确职责,没有特权指令,没有地址保护,你还想像java开发一样,只管new内存,不去释放,应用可以随便崩但系统跑的妥妥的？

## 内存管理在管什么?

给你这么大空间你干活才有动力，奴才们是铆足了劲一个个尽情的表演各种剧本，有玩电子商务的，有玩游戏的，有搞直播的等等。。。

## MMU

定义：它是一种负责处理中央处理器（CPU）的内存访问请求的计算机硬件。它的功能包括虚拟地址到物理地址的转换（即虚拟内存管理）、内存保护、中央处理器高速缓存的控制。通过它的一番操作，把物理空间成倍成倍的放大，他们之间的映射关系存放在页面中。

虚拟内存就是被MMU虚拟出来的比物理页面大的多的空间。


A|999|88 
B|777|88

这样A就拿到了他认为的是在999号房的菜，A全程都不用知道 88号房的存在，它只认999号是我的仓库，里面会有我的菜就行了，记住这是映射的核心机制！！！ 这个过程涉及到两个内存概念：缺页中断和页面置换。缺页中断就是88号房被B占了发出一个中断信号，页面置换就是把88号房的东西先搬到城外B的仓库，又从A仓库的菜搬到88号房。

虚拟内存管理在鸿蒙主要由 VmMapRegion 这个结构体来串联，很复杂，什么红黑树，映射（file,swap），共享内存，访问权限等等都由它来完成。
